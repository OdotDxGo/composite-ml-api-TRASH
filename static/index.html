<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Composite Materials ML Predictor</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
        }

        .header {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            margin-bottom: 30px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
            position: relative;
        }

        .lang-switch {
            position: absolute;
            top: 20px;
            right: 20px;
            display: flex;
            gap: 10px;
        }

        .lang-btn {
            padding: 8px 16px;
            border: 2px solid #667eea;
            background: white;
            color: #667eea;
            border-radius: 8px;
            cursor: pointer;
            font-weight: 600;
            transition: all 0.3s;
        }

        .lang-btn.active {
            background: #667eea;
            color: white;
        }

        .lang-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(102, 126, 234, 0.3);
        }

        h1 {
            color: #2d3748;
            font-size: 2.5em;
            margin-bottom: 10px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            color: #718096;
            font-size: 1.1em;
        }

        .main-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin-bottom: 30px;
        }

        @media (max-width: 1200px) {
            .main-grid {
                grid-template-columns: 1fr;
            }
        }

        .card {
            background: rgba(255, 255, 255, 0.95);
            padding: 30px;
            border-radius: 20px;
            box-shadow: 0 20px 60px rgba(0,0,0,0.3);
        }

        .card h2 {
            color: #2d3748;
            margin-bottom: 20px;
            font-size: 1.8em;
        }

        .info-box {
            background: linear-gradient(135deg, #667eea15 0%, #764ba215 100%);
            padding: 15px;
            border-radius: 10px;
            margin-bottom: 20px;
            border-left: 4px solid #667eea;
        }

        .info-box p {
            color: #4a5568;
            line-height: 1.6;
            margin: 5px 0;
        }

        .form-group {
            margin-bottom: 25px;
        }

        label {
            display: block;
            color: #2d3748;
            font-weight: 600;
            margin-bottom: 8px;
            font-size: 1.05em;
        }

        .tooltip {
            display: inline-block;
            margin-left: 8px;
            width: 18px;
            height: 18px;
            background: #667eea;
            color: white;
            border-radius: 50%;
            text-align: center;
            font-size: 12px;
            line-height: 18px;
            cursor: help;
            position: relative;
        }

        .tooltip:hover::after {
            content: attr(data-tip);
            position: absolute;
            bottom: 25px;
            left: 50%;
            transform: translateX(-50%);
            background: #2d3748;
            color: white;
            padding: 8px 12px;
            border-radius: 6px;
            white-space: nowrap;
            font-size: 12px;
            z-index: 1000;
            box-shadow: 0 4px 12px rgba(0,0,0,0.3);
        }

        select, input {
            width: 100%;
            padding: 12px 15px;
            border: 2px solid #e2e8f0;
            border-radius: 10px;
            font-size: 1em;
            transition: all 0.3s;
            background: white;
        }

        select:focus, input:focus {
            outline: none;
            border-color: #667eea;
            box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
        }

        .slider-container {
            margin-top: 10px;
        }

        .slider-value {
            display: inline-block;
            background: #667eea;
            color: white;
            padding: 4px 12px;
            border-radius: 6px;
            font-weight: 600;
            margin-left: 10px;
        }

        input[type="range"] {
            -webkit-appearance: none;
            width: 100%;
            height: 8px;
            border-radius: 5px;
            background: #e2e8f0;
            outline: none;
            padding: 0;
            margin: 15px 0;
        }

        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
        }

        input[type="range"]::-moz-range-thumb {
            width: 20px;
            height: 20px;
            border-radius: 50%;
            background: #667eea;
            cursor: pointer;
            border: none;
            box-shadow: 0 2px 8px rgba(102, 126, 234, 0.4);
        }

        button {
            width: 100%;
            padding: 15px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            color: white;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4);
        }

        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5);
        }

        button:active {
            transform: translateY(0);
        }

        #visualization {
            width: 100%;
            height: 400px;
            background: #1a202c;
            border-radius: 15px;
            position: relative;
            overflow: hidden;
        }

        .viz-controls {
            position: absolute;
            top: 15px;
            right: 15px;
            z-index: 10;
            display: flex;
            gap: 10px;
        }

        .viz-btn {
            padding: 8px 15px;
            background: rgba(255, 255, 255, 0.9);
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 0.9em;
            font-weight: 600;
            color: #2d3748;
        }

        .viz-btn:hover {
            background: white;
        }

        .results-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-top: 30px;
        }

        .result-card {
            background: white;
            padding: 20px;
            border-radius: 15px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            border-left: 4px solid #667eea;
            transition: all 0.3s;
        }

        .result-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.3);
        }

        .result-label {
            color: #718096;
            font-size: 0.9em;
            margin-bottom: 8px;
        }

        .result-value {
            color: #2d3748;
            font-size: 1.8em;
            font-weight: 700;
        }

        .result-unit {
            color: #a0aec0;
            font-size: 0.8em;
            font-weight: 400;
        }

        .loading {
            display: none;
            text-align: center;
            padding: 20px;
        }

        .spinner {
            border: 4px solid #e2e8f0;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin: 0 auto 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .legend {
            background: rgba(255, 255, 255, 0.9);
            padding: 15px;
            border-radius: 10px;
            position: absolute;
            bottom: 15px;
            left: 15px;
            z-index: 10;
        }

        .legend-item {
            display: flex;
            align-items: center;
            margin: 5px 0;
            font-size: 0.9em;
        }

        .legend-color {
            width: 20px;
            height: 20px;
            border-radius: 4px;
            margin-right: 10px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- Header -->
        <div class="header">
            <div class="lang-switch">
                <button class="lang-btn active" onclick="setLanguage('ru')">RU</button>
                <button class="lang-btn" onclick="setLanguage('en')">EN</button>
            </div>
            <h1 data-ru="–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ –∫–æ–º–ø–æ–∑–∏—Ç–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤" data-en="Composite Materials Properties Predictor">–ü—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏–µ —Å–≤–æ–π—Å—Ç–≤ –∫–æ–º–ø–æ–∑–∏—Ç–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤</h1>
            <p class="subtitle" data-ru="–ë—ã—Å—Ç—Ä—ã–π –∏ —Ç–æ—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏—Ö —Å–≤–æ–π—Å—Ç–≤ –∫–æ–º–ø–æ–∑–∏—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∏—Ö —Ñ–æ—Ä–º—É–ª" data-en="Fast and accurate prediction of composite mechanical properties using empirical formulas">–ë—ã—Å—Ç—Ä—ã–π –∏ —Ç–æ—á–Ω—ã–π —Ä–∞—Å—á–µ—Ç –º–µ—Ö–∞–Ω–∏—á–µ—Å–∫–∏—Ö —Å–≤–æ–π—Å—Ç–≤ –∫–æ–º–ø–æ–∑–∏—Ç–æ–≤ –Ω–∞ –æ—Å–Ω–æ–≤–µ —ç–º–ø–∏—Ä–∏—á–µ—Å–∫–∏—Ö —Ñ–æ—Ä–º—É–ª</p>
        </div>

        <!-- Main Grid -->
        <div class="main-grid">
            <!-- Input Panel -->
            <div class="card">
                <h2 data-ru="‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ç–µ—Ä–∏–∞–ª–∞" data-en="‚öôÔ∏è Material Parameters">‚öôÔ∏è –ü–∞—Ä–∞–º–µ—Ç—Ä—ã –º–∞—Ç–µ—Ä–∏–∞–ª–∞</h2>
                
                <div class="info-box">
                    <p data-ru="üí° –í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∞—à–µ–≥–æ –∫–æ–º–ø–æ–∑–∏—Ç–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞. –í—Å–µ –ø–æ–ª—è –∏–º–µ—é—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∏ - –Ω–∞–≤–µ–¥–∏—Ç–µ –∫—É—Ä—Å–æ—Ä –Ω–∞ –∑–Ω–∞–∫ '?' –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏." data-en="üí° Select your composite material parameters. All fields have tooltips - hover over '?' for more information.">üí° –í—ã–±–µ—Ä–∏—Ç–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤–∞—à–µ–≥–æ –∫–æ–º–ø–æ–∑–∏—Ç–Ω–æ–≥–æ –º–∞—Ç–µ—Ä–∏–∞–ª–∞. –í—Å–µ –ø–æ–ª—è –∏–º–µ—é—Ç –ø–æ–¥—Å–∫–∞–∑–∫–∏ - –Ω–∞–≤–µ–¥–∏—Ç–µ –∫—É—Ä—Å–æ—Ä –Ω–∞ –∑–Ω–∞–∫ '?' –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏.</p>
                </div>

                <form id="predictionForm">
                    <!-- Fiber Type -->
                    <div class="form-group">
                        <label>
                            <span data-ru="–¢–∏–ø –≤–æ–ª–æ–∫–Ω–∞" data-en="Fiber Type">–¢–∏–ø –≤–æ–ª–æ–∫–Ω–∞</span>
                            <span class="tooltip" data-tip-ru="–ú–∞—Ç–µ—Ä–∏–∞–ª –∞—Ä–º–∏—Ä—É—é—â–∏—Ö –≤–æ–ª–æ–∫–æ–Ω" data-tip-en="Reinforcing fiber material" data-tip="–ú–∞—Ç–µ—Ä–∏–∞–ª –∞—Ä–º–∏—Ä—É—é—â–∏—Ö –≤–æ–ª–æ–∫–æ–Ω">?</span>
                        </label>
                        <select id="fiber_type" name="fiber_type">
                            <option value="Carbon" data-ru="–£–≥–ª–µ—Ä–æ–¥–Ω–æ–µ (Carbon) - –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ—á–Ω–æ—Å—Ç—å" data-en="Carbon - high strength">–£–≥–ª–µ—Ä–æ–¥–Ω–æ–µ (Carbon) - –≤—ã—Å–æ–∫–∞—è –ø—Ä–æ—á–Ω–æ—Å—Ç—å</option>
                            <option value="Glass" data-ru="–°—Ç–µ–∫–ª—è–Ω–Ω–æ–µ (Glass) - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ" data-en="Glass - universal">–°—Ç–µ–∫–ª—è–Ω–Ω–æ–µ (Glass) - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–æ–µ</option>
                            <option value="Aramid" data-ru="–ê—Ä–∞–º–∏–¥–Ω–æ–µ (Aramid/Kevlar) - —É–¥–∞—Ä–æ–ø—Ä–æ—á–Ω–æ–µ" data-en="Aramid/Kevlar - impact resistant">–ê—Ä–∞–º–∏–¥–Ω–æ–µ (Aramid/Kevlar) - —É–¥–∞—Ä–æ–ø—Ä–æ—á–Ω–æ–µ</option>
                            <option value="Basalt" data-ru="–ë–∞–∑–∞–ª—å—Ç–æ–≤–æ–µ (Basalt) - —Ç–µ—Ä–º–æ—Å—Ç–æ–π–∫–æ–µ" data-en="Basalt - heat resistant">–ë–∞–∑–∞–ª—å—Ç–æ–≤–æ–µ (Basalt) - —Ç–µ—Ä–º–æ—Å—Ç–æ–π–∫–æ–µ</option>
                            <option value="Natural" data-ru="–ù–∞—Ç—É—Ä–∞–ª—å–Ω–æ–µ (Natural) - —ç–∫–æ–ª–æ–≥–∏—á–Ω–æ–µ" data-en="Natural - eco-friendly">–ù–∞—Ç—É—Ä–∞–ª—å–Ω–æ–µ (Natural) - —ç–∫–æ–ª–æ–≥–∏—á–Ω–æ–µ</option>
                        </select>
                    </div>

                    <!-- Matrix Type -->
                    <div class="form-group">
                        <label>
                            <span data-ru="–¢–∏–ø –º–∞—Ç—Ä–∏—Ü—ã" data-en="Matrix Type">–¢–∏–ø –º–∞—Ç—Ä–∏—Ü—ã</span>
                            <span class="tooltip" data-tip-ru="–ú–∞—Ç–µ—Ä–∏–∞–ª —Å–≤—è–∑—É—é—â–µ–≥–æ" data-tip-en="Binding material" data-tip="–ú–∞—Ç–µ—Ä–∏–∞–ª —Å–≤—è–∑—É—é—â–µ–≥–æ">?</span>
                        </label>
                        <select id="matrix_type" name="matrix_type">
                            <option value="Epoxy" data-ru="–≠–ø–æ–∫—Å–∏–¥–Ω–∞—è (Epoxy) - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è" data-en="Epoxy - universal">–≠–ø–æ–∫—Å–∏–¥–Ω–∞—è (Epoxy) - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è</option>
                            <option value="Polyester" data-ru="–ü–æ–ª–∏—ç—Ñ–∏—Ä–Ω–∞—è (Polyester) - —ç–∫–æ–Ω–æ–º–∏—á–Ω–∞—è" data-en="Polyester - economical">–ü–æ–ª–∏—ç—Ñ–∏—Ä–Ω–∞—è (Polyester) - —ç–∫–æ–Ω–æ–º–∏—á–Ω–∞—è</option>
                            <option value="Vinyl_ester" data-ru="–í–∏–Ω–∏–ª—ç—Ñ–∏—Ä–Ω–∞—è (Vinyl Ester) - —Ö–∏–º—Å—Ç–æ–π–∫–∞—è" data-en="Vinyl Ester - chemical resistant">–í–∏–Ω–∏–ª—ç—Ñ–∏—Ä–Ω–∞—è (Vinyl Ester) - —Ö–∏–º—Å—Ç–æ–π–∫–∞—è</option>
                            <option value="PEEK" data-ru="PEEK - –≤—ã—Å–æ–∫–æ—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–∞—è" data-en="PEEK - high temperature">PEEK - –≤—ã—Å–æ–∫–æ—Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–Ω–∞—è</option>
                            <option value="PA6" data-ru="PA6 (Nylon) - —É–¥–∞—Ä–æ–ø—Ä–æ—á–Ω–∞—è" data-en="PA6 (Nylon) - impact resistant">PA6 (Nylon) - —É–¥–∞—Ä–æ–ø—Ä–æ—á–Ω–∞—è</option>
                        </select>
                    </div>

                    <!-- Volume Fraction -->
                    <div class="form-group">
                        <label>
                            <span data-ru="–û–±—ä–µ–º–Ω–∞—è –¥–æ–ª—è –≤–æ–ª–æ–∫–Ω–∞" data-en="Fiber Volume Fraction">–û–±—ä–µ–º–Ω–∞—è –¥–æ–ª—è –≤–æ–ª–æ–∫–Ω–∞</span>
                            <span class="tooltip" data-tip-ru="–ü—Ä–æ—Ü–µ–Ω—Ç –æ–±—ä–µ–º–∞ –≤–æ–ª–æ–∫–æ–Ω –≤ –∫–æ–º–ø–æ–∑–∏—Ç–µ (30-70%)" data-tip-en="Percentage of fiber volume in composite (30-70%)" data-tip="–ü—Ä–æ—Ü–µ–Ω—Ç –æ–±—ä–µ–º–∞ –≤–æ–ª–æ–∫–æ–Ω –≤ –∫–æ–º–ø–æ–∑–∏—Ç–µ (30-70%)">?</span>
                            <span class="slider-value" id="vf_value">60%</span>
                        </label>
                        <input type="range" id="fiber_vf" name="fiber_vf" min="0.3" max="0.7" step="0.05" value="0.6" oninput="updateSlider(this.value)">
                        <div style="display: flex; justify-content: space-between; font-size: 0.85em; color: #718096;">
                            <span>30%</span>
                            <span data-ru="–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ: 60%" data-en="Recommended: 60%">–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º–æ–µ: 60%</span>
                            <span>70%</span>
                        </div>
                    </div>

                    <!-- Layup -->
                    <div class="form-group">
                        <label>
                            <span data-ru="–°—Ö–µ–º–∞ —É–∫–ª–∞–¥–∫–∏" data-en="Layup Pattern">–°—Ö–µ–º–∞ —É–∫–ª–∞–¥–∫–∏</span>
                            <span class="tooltip" data-tip-ru="–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è —Å–ª–æ–µ–≤ –≤–æ–ª–æ–∫–æ–Ω" data-tip-en="Fiber layers orientation" data-tip="–û—Ä–∏–µ–Ω—Ç–∞—Ü–∏—è —Å–ª–æ–µ–≤ –≤–æ–ª–æ–∫–æ–Ω">?</span>
                        </label>
                        <select id="layup" name="layup">
                            <option value="UD 0¬∞" data-ru="–û–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è 0¬∞ - –º–∞–∫—Å. –ø—Ä–æ—á–Ω–æ—Å—Ç—å" data-en="Unidirectional 0¬∞ - max strength">–û–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è 0¬∞ - –º–∞–∫—Å. –ø—Ä–æ—á–Ω–æ—Å—Ç—å</option>
                            <option value="UD 90¬∞" data-ru="–û–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è 90¬∞ - –ø–æ–ø–µ—Ä–µ—á–Ω–∞—è" data-en="Unidirectional 90¬∞ - transverse">–û–¥–Ω–æ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è 90¬∞ - –ø–æ–ø–µ—Ä–µ—á–Ω–∞—è</option>
                            <option value="Woven" data-ru="–¢–∫–∞–Ω–∞—è - —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è" data-en="Woven - balanced">–¢–∫–∞–Ω–∞—è - —Å–±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∞–Ω–Ω–∞—è</option>
                            <option value="[0/90]2s" data-ru="[0/90]2s - –∫—Ä–µ—Å—Ç–æ–æ–±—Ä–∞–∑–Ω–∞—è" data-en="[0/90]2s - cross-ply">[0/90]2s - –∫—Ä–µ—Å—Ç–æ–æ–±—Ä–∞–∑–Ω–∞—è</option>
                            <option value="[0/45/90/-45]s" data-ru="[0/45/90/-45]s - –∫–≤–∞–∑–∏-–∏–∑–æ—Ç—Ä–æ–ø–Ω–∞—è" data-en="[0/45/90/-45]s - quasi-isotropic">[0/45/90/-45]s - –∫–≤–∞–∑–∏-–∏–∑–æ—Ç—Ä–æ–ø–Ω–∞—è</option>
                            <option value="[¬±45]2s" data-ru="[¬±45]2s - –Ω–∞ —Å–¥–≤–∏–≥" data-en="[¬±45]2s - shear">[¬±45]2s - –Ω–∞ —Å–¥–≤–∏–≥</option>
                            <option value="Quasi-isotropic" data-ru="–ö–≤–∞–∑–∏-–∏–∑–æ—Ç—Ä–æ–ø–Ω–∞—è - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è" data-en="Quasi-isotropic - universal">–ö–≤–∞–∑–∏-–∏–∑–æ—Ç—Ä–æ–ø–Ω–∞—è - —É–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω–∞—è</option>
                        </select>
                    </div>

                    <!-- Manufacturing -->
                    <div class="form-group">
                        <label>
                            <span data-ru="–ú–µ—Ç–æ–¥ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞" data-en="Manufacturing Method">–ú–µ—Ç–æ–¥ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–∞</span>
                            <span class="tooltip" data-tip-ru="–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–æ–∑–∏—Ç–∞" data-tip-en="Composite manufacturing technology" data-tip="–¢–µ—Ö–Ω–æ–ª–æ–≥–∏—è –∏–∑–≥–æ—Ç–æ–≤–ª–µ–Ω–∏—è –∫–æ–º–ø–æ–∑–∏—Ç–∞">?</span>
                        </label>
                        <select id="manufacturing" name="manufacturing">
                            <option value="Autoclave" data-ru="–ê–≤—Ç–æ–∫–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ä–º–æ–≤–∞–Ω–∏–µ - –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ" data-en="Autoclave - high quality">–ê–≤—Ç–æ–∫–ª–∞–≤–Ω–æ–µ —Ñ–æ—Ä–º–æ–≤–∞–Ω–∏–µ - –≤—ã—Å–æ–∫–æ–µ –∫–∞—á–µ—Å—Ç–≤–æ</option>
                            <option value="VARTM" data-ru="VARTM - –≤–∞–∫—É—É–º–Ω–∞—è –∏–Ω—Ñ—É–∑–∏—è" data-en="VARTM - vacuum infusion">VARTM - –≤–∞–∫—É—É–º–Ω–∞—è –∏–Ω—Ñ—É–∑–∏—è</option>
                            <option value="RTM" data-ru="RTM - –ª–∏—Ç—å–µ –ø–æ–¥ –¥–∞–≤–ª–µ–Ω–∏–µ–º" data-en="RTM - resin transfer molding">RTM - –ª–∏—Ç—å–µ –ø–æ–¥ –¥–∞–≤–ª–µ–Ω–∏–µ–º</option>
                            <option value="Pultrusion" data-ru="–ü—É–ª—Ç—Ä—É–∑–∏—è - –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ" data-en="Pultrusion - continuous production">–ü—É–ª—Ç—Ä—É–∑–∏—è - –Ω–µ–ø—Ä–µ—Ä—ã–≤–Ω–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ</option>
                            <option value="Filament_winding" data-ru="–ù–∞–º–æ—Ç–∫–∞ - –¥–ª—è —Ç—Ä—É–± –∏ –±–∞–ª–ª–æ–Ω–æ–≤" data-en="Filament winding - for tubes">–ù–∞–º–æ—Ç–∫–∞ - –¥–ª—è —Ç—Ä—É–± –∏ –±–∞–ª–ª–æ–Ω–æ–≤</option>
                            <option value="Compression_molding" data-ru="–ü—Ä–µ—Å—Å–æ–≤–∞–Ω–∏–µ - –º–∞—Å—Å–æ–≤–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ" data-en="Compression molding - mass production">–ü—Ä–µ—Å—Å–æ–≤–∞–Ω–∏–µ - –º–∞—Å—Å–æ–≤–æ–µ –ø—Ä–æ–∏–∑–≤–æ–¥—Å—Ç–≤–æ</option>
                            <option value="Hand_layup" data-ru="–†—É—á–Ω–∞—è —É–∫–ª–∞–¥–∫–∞ - –ø—Ä–æ—Å—Ç–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è" data-en="Hand layup - simple technology">–†—É—á–Ω–∞—è —É–∫–ª–∞–¥–∫–∞ - –ø—Ä–æ—Å—Ç–∞—è —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏—è</option>
                        </select>
                    </div>

                    <button type="submit" data-ru="üöÄ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞" data-en="üöÄ Calculate Properties">üöÄ –†–∞—Å—Å—á–∏—Ç–∞—Ç—å —Å–≤–æ–π—Å—Ç–≤–∞</button>
                </form>

                <div class="loading" id="loading">
                    <div class="spinner"></div>
                    <p data-ru="–†–∞—Å—á–µ—Ç —Å–≤–æ–π—Å—Ç–≤..." data-en="Calculating properties...">–†–∞—Å—á–µ—Ç —Å–≤–æ–π—Å—Ç–≤...</p>
                </div>
            </div>

            <!-- 3D Visualization -->
            <div class="card">
                <h2 data-ru="üé® 3D –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã" data-en="üé® 3D Structure Visualization">üé® 3D –í–∏–∑—É–∞–ª–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã</h2>
                <div id="visualization">
                    <div class="viz-controls">
                        <button class="viz-btn" onclick="resetCamera()" data-ru="üîÑ –°–±—Ä–æ—Å" data-en="üîÑ Reset">üîÑ –°–±—Ä–æ—Å</button>
                        <button class="viz-btn" onclick="toggleRotation()" data-ru="‚è∏Ô∏è –°—Ç–æ–ø" data-en="‚è∏Ô∏è Stop">‚è∏Ô∏è –°—Ç–æ–ø</button>
                    </div>
                    <div class="legend">
                        <div class="legend-item">
                            <div class="legend-color" style="background: #4299e1;"></div>
                            <span data-ru="–í–æ–ª–æ–∫–Ω–∞" data-en="Fibers">–í–æ–ª–æ–∫–Ω–∞</span>
                        </div>
                        <div class="legend-item">
                            <div class="legend-color" style="background: #ed8936;"></div>
                            <span data-ru="–ú–∞—Ç—Ä–∏—Ü–∞" data-en="Matrix">–ú–∞—Ç—Ä–∏—Ü–∞</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Results -->
        <div class="card" id="resultsCard" style="display: none;">
            <h2 data-ru="üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞" data-en="üìä Calculation Results">üìä –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ä–∞—Å—á–µ—Ç–∞</h2>
            <div class="results-grid" id="results"></div>
        </div>
    </div>

    <script>
        let currentLang = 'ru';
        let scene, camera, renderer, fibers = [], isRotating = true;

        // Language switching
        function setLanguage(lang) {
            currentLang = lang;
            document.querySelectorAll('.lang-btn').forEach(btn => btn.classList.remove('active'));
            event.target.classList.add('active');

            // Update all text elements
            document.querySelectorAll('[data-ru]').forEach(el => {
                if (el.tagName === 'OPTION') {
                    el.textContent = el.getAttribute('data-' + lang);
                } else {
                    el.childNodes[0].textContent = el.getAttribute('data-' + lang);
                }
            });

            // Update tooltips
            document.querySelectorAll('.tooltip').forEach(el => {
                el.setAttribute('data-tip', el.getAttribute('data-tip-' + lang));
            });
        }

        // Slider update
        function updateSlider(value) {
            document.getElementById('vf_value').textContent = Math.round(value * 100) + '%';
            updateVisualization();
        }

        // 3D Visualization
        function init3D() {
            const container = document.getElementById('visualization');
            const width = container.offsetWidth;
            const height = container.offsetHeight;

            // Scene
            scene = new THREE.Scene();
            scene.background = new THREE.Color(0x1a202c);

            // Camera
            camera = new THREE.PerspectiveCamera(75, width / height, 0.1, 1000);
            camera.position.set(5, 5, 5);
            camera.lookAt(0, 0, 0);

            // Renderer
            renderer = new THREE.WebGLRenderer({ antialias: true });
            renderer.setSize(width, height);
            container.appendChild(renderer.domElement);

            // Lights
            const ambientLight = new THREE.AmbientLight(0xffffff, 0.6);
            scene.add(ambientLight);

            const directionalLight = new THREE.DirectionalLight(0xffffff, 0.8);
            directionalLight.position.set(5, 5, 5);
            scene.add(directionalLight);

            createComposite();
            animate();
        }

        function createComposite() {
            // Clear existing fibers
            fibers.forEach(fiber => scene.remove(fiber));
            fibers = [];

            const vf = parseFloat(document.getElementById('fiber_vf').value);
            const fiberCount = Math.round(vf * 100);

            // Create fibers (blue cylinders)
            for (let i = 0; i < fiberCount; i++) {
                const geometry = new THREE.CylinderGeometry(0.05, 0.05, 4, 8);
                const material = new THREE.MeshPhongMaterial({ 
                    color: 0x4299e1,
                    shininess: 100
                });
                const fiber = new THREE.Mesh(geometry, material);
                
                // Random position in a grid
                const gridSize = 10;
                fiber.position.x = (Math.random() - 0.5) * 3;
                fiber.position.z = (Math.random() - 0.5) * 3;
                fiber.rotation.x = Math.PI / 2;
                
                scene.add(fiber);
                fibers.push(fiber);
            }

            // Matrix (transparent orange box)
            const matrixGeometry = new THREE.BoxGeometry(3.5, 4.5, 3.5);
            const matrixMaterial = new THREE.MeshPhongMaterial({ 
                color: 0xed8936,
                transparent: true,
                opacity: 0.3,
                shininess: 50
            });
            const matrix = new THREE.Mesh(matrixGeometry, matrixMaterial);
            matrix.position.y = 0;
            scene.add(matrix);
        }

        function updateVisualization() {
            createComposite();
        }

        function animate() {
            requestAnimationFrame(animate);
            
            if (isRotating) {
                fibers.forEach((fiber, index) => {
                    fiber.rotation.z += 0.001 + index * 0.0001;
                });
            }
            
            renderer.render(scene, camera);
        }

        function resetCamera() {
            camera.position.set(5, 5, 5);
            camera.lookAt(0, 0, 0);
        }

        function toggleRotation() {
            isRotating = !isRotating;
            const btn = event.target;
            btn.textContent = isRotating ? (currentLang === 'ru' ? '‚è∏Ô∏è –°—Ç–æ–ø' : '‚è∏Ô∏è Stop') : (currentLang === 'ru' ? '‚ñ∂Ô∏è –°—Ç–∞—Ä—Ç' : '‚ñ∂Ô∏è Start');
        }

        // Form submission
        document.getElementById('predictionForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const loading = document.getElementById('loading');
            const resultsCard = document.getElementById('resultsCard');
            
            loading.style.display = 'block';
            resultsCard.style.display = 'none';

            const formData = {
                fiber_type: document.getElementById('fiber_type').value,
                matrix_type: document.getElementById('matrix_type').value,
                fiber_volume_fraction: parseFloat(document.getElementById('fiber_vf').value),
                layup: document.getElementById('layup').value,
                manufacturing: document.getElementById('manufacturing').value
            };

            try {
                const response = await fetch('/api/predict', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify(formData)
                });

                const data = await response.json();
                
                if (data.success) {
                    displayResults(data.predictions);
                }
            } catch (error) {
                alert(currentLang === 'ru' ? '–û—à–∏–±–∫–∞ –ø—Ä–∏ —Ä–∞—Å—á–µ—Ç–µ' : 'Calculation error');
            } finally {
                loading.style.display = 'none';
            }
        });

        function displayResults(predictions) {
            const resultsCard = document.getElementById('resultsCard');
            const resultsDiv = document.getElementById('results');
            
            const labels = {
                ru: {
                    tensile_strength_MPa: '–ü—Ä–æ—á–Ω–æ—Å—Ç—å –Ω–∞ —Ä–∞—Å—Ç—è–∂–µ–Ω–∏–µ',
                    tensile_modulus_GPa: '–ú–æ–¥—É–ª—å —É–ø—Ä—É–≥–æ—Å—Ç–∏ –ø—Ä–∏ —Ä–∞—Å—Ç—è–∂–µ–Ω–∏–∏',
                    compressive_strength_MPa: '–ü—Ä–æ—á–Ω–æ—Å—Ç—å –Ω–∞ —Å–∂–∞—Ç–∏–µ',
                    flexural_strength_MPa: '–ü—Ä–æ—á–Ω–æ—Å—Ç—å –Ω–∞ –∏–∑–≥–∏–±',
                    flexural_modulus_GPa: '–ú–æ–¥—É–ª—å —É–ø—Ä—É–≥–æ—Å—Ç–∏ –ø—Ä–∏ –∏–∑–≥–∏–±–µ',
                    ILSS_MPa: '–ü—Ä–æ—á–Ω–æ—Å—Ç—å –Ω–∞ –º–µ–∂—Å–ª–æ–π–Ω—ã–π —Å–¥–≤–∏–≥',
                    impact_energy_J: '–£–¥–∞—Ä–Ω–∞—è —ç–Ω–µ—Ä–≥–∏—è'
                },
                en: {
                    tensile_strength_MPa: 'Tensile Strength',
                    tensile_modulus_GPa: 'Tensile Modulus',
                    compressive_strength_MPa: 'Compressive Strength',
                    flexural_strength_MPa: 'Flexural Strength',
                    flexural_modulus_GPa: 'Flexural Modulus',
                    ILSS_MPa: 'Interlaminar Shear Strength',
                    impact_energy_J: 'Impact Energy'
                }
            };

            const units = {
                tensile_strength_MPa: 'MPa',
                tensile_modulus_GPa: 'GPa',
                compressive_strength_MPa: 'MPa',
                flexural_strength_MPa: 'MPa',
                flexural_modulus_GPa: 'GPa',
                ILSS_MPa: 'MPa',
                impact_energy_J: 'J'
            };

            resultsDiv.innerHTML = '';
            
            Object.entries(predictions).forEach(([key, value]) => {
                const card = document.createElement('div');
                card.className = 'result-card';
                card.innerHTML = `
                    <div class="result-label">${labels[currentLang][key]}</div>
                    <div class="result-value">${value} <span class="result-unit">${units[key]}</span></div>
                `;
                resultsDiv.appendChild(card);
            });

            resultsCard.style.display = 'block';
            resultsCard.scrollIntoView({ behavior: 'smooth' });
        }

        // Initialize
        window.addEventListener('load', () => {
            init3D();
        });

        // Handle window resize
        window.addEventListener('resize', () => {
            const container = document.getElementById('visualization');
            const width = container.offsetWidth;
            const height = container.offsetHeight;
            
            camera.aspect = width / height;
            camera.updateProjectionMatrix();
            renderer.setSize(width, height);
        });
    </script>
</body>
</html>
